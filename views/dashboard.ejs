<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
  <%- include('partials/navbar') %>
  
  <div class="container mt-4">
    <%- include('partials/messages') %>
    
    <h1 class="mb-4"><i class="bi bi-speedometer2"></i> <%= title %></h1>

    <!-- Statistiques -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card text-white bg-primary">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-list"></i> Catways</h5>
            <h2><%= catways.length %></h2>
            <a href="/dashboard/catways" class="btn btn-light btn-sm">Voir la liste</a>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card text-white bg-success">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-calendar-check"></i> Réservations</h5>
            <h2><%= reservations.length %></h2>
            <a href="/dashboard/reservations" class="btn btn-light btn-sm">Voir la liste</a>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Gestion des utilisateurs -->
      <div class="col-lg-6 mb-4">
        <div class="card">
          <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="bi bi-people"></i> Gestion des Utilisateurs</h5>
          </div>
          <div class="card-body">
            <!-- Créer utilisateur -->
            <div class="accordion mb-3" id="userAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#createUser">
                    <i class="bi bi-plus-circle"></i> Créer un utilisateur
                  </button>
                </h2>
                <div id="createUser" class="accordion-collapse collapse" data-bs-parent="#userAccordion">
                  <div class="accordion-body">
                    <form id="createUserForm">
                      <div class="mb-3">
                        <label class="form-label">Nom</label>
                        <input type="text" class="form-control" name="name" required>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" required>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Mot de passe</label>
                        <input type="password" class="form-control" name="password" required>
                      </div>
                      <button type="submit" class="btn btn-primary">Créer</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Modifier utilisateur -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#updateUser">
                    <i class="bi bi-pencil"></i> Modifier un utilisateur
                  </button>
                </h2>
                <div id="updateUser" class="accordion-collapse collapse" data-bs-parent="#userAccordion">
                  <div class="accordion-body">
                    <form id="updateUserForm">
                      <div class="mb-3">
                        <label class="form-label">ID de l'utilisateur</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Nom (optionnel)</label>
                        <input type="text" class="form-control" name="name">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Email (optionnel)</label>
                        <input type="email" class="form-control" name="email">
                      </div>
                      <button type="submit" class="btn btn-warning">Modifier</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Supprimer utilisateur -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#deleteUser">
                    <i class="bi bi-trash"></i> Supprimer un utilisateur
                  </button>
                </h2>
                <div id="deleteUser" class="accordion-collapse collapse" data-bs-parent="#userAccordion">
                  <div class="accordion-body">
                    <form id="deleteUserForm">
                      <div class="mb-3">
                        <label class="form-label">ID de l'utilisateur</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <button type="submit" class="btn btn-danger">Supprimer</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Gestion des catways -->
      <div class="col-lg-6 mb-4">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-list"></i> Gestion des Catways</h5>
          </div>
          <div class="card-body">
            <div class="accordion mb-3" id="catwayAccordion">
              <!-- Créer catway -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#createCatway">
                    <i class="bi bi-plus-circle"></i> Créer un catway
                  </button>
                </h2>
                <div id="createCatway" class="accordion-collapse collapse" data-bs-parent="#catwayAccordion">
                  <div class="accordion-body">
                    <form id="createCatwayForm">
                      <div class="mb-3">
                        <label class="form-label">Numéro</label>
                        <input type="text" class="form-control" name="catwayNumber" required>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Type</label>
                        <select class="form-select" name="type" required>
                          <option value="long">Long</option>
                          <option value="short">Short</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">État</label>
                        <input type="text" class="form-control" name="catwayState" value="Bon état">
                      </div>
                      <button type="submit" class="btn btn-primary">Créer</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Modifier catway -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#updateCatway">
                    <i class="bi bi-pencil"></i> Modifier un catway
                  </button>
                </h2>
                <div id="updateCatway" class="accordion-collapse collapse" data-bs-parent="#catwayAccordion">
                  <div class="accordion-body">
                    <form id="updateCatwayForm">
                      <div class="mb-3">
                        <label class="form-label">ID du catway</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Nouvel état</label>
                        <input type="text" class="form-control" name="catwayState" required>
                      </div>
                      <button type="submit" class="btn btn-warning">Modifier</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Supprimer catway -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#deleteCatway">
                    <i class="bi bi-trash"></i> Supprimer un catway
                  </button>
                </h2>
                <div id="deleteCatway" class="accordion-collapse collapse" data-bs-parent="#catwayAccordion">
                  <div class="accordion-body">
                    <form id="deleteCatwayForm">
                      <div class="mb-3">
                        <label class="form-label">ID du catway</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <button type="submit" class="btn btn-danger">Supprimer</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Afficher détails catway -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#viewCatway">
                    <i class="bi bi-eye"></i> Afficher un catway
                  </button>
                </h2>
                <div id="viewCatway" class="accordion-collapse collapse" data-bs-parent="#catwayAccordion">
                  <div class="accordion-body">
                    <form id="viewCatwayForm">
                      <div class="mb-3">
                        <label class="form-label">ID du catway</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <button type="submit" class="btn btn-info">Afficher</button>
                    </form>
                    <div id="catwayDetails" class="mt-3"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Gestion des réservations -->
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header bg-success text-white">
            <h5 class="mb-0"><i class="bi bi-calendar-check"></i> Gestion des Réservations</h5>
          </div>
          <div class="card-body">
            <div class="accordion mb-3" id="reservationAccordion">
              <!-- Créer réservation -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#createReservation">
                    <i class="bi bi-plus-circle"></i> Créer une réservation
                  </button>
                </h2>
                <div id="createReservation" class="accordion-collapse collapse" data-bs-parent="#reservationAccordion">
                  <div class="accordion-body">
                    <form id="createReservationForm">
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label class="form-label">Numéro de catway</label>
                          <input type="text" class="form-control" name="catwayNumber" required>
                        </div>
                        <div class="col-md-6 mb-3">
                          <label class="form-label">Nom du client</label>
                          <input type="text" class="form-control" name="clientName" required>
                        </div>
                        <div class="col-md-6 mb-3">
                          <label class="form-label">Nom du bateau</label>
                          <input type="text" class="form-control" name="boatName" required>
                        </div>
                        <div class="col-md-3 mb-3">
                          <label class="form-label">Date d'arrivée</label>
                          <input type="date" class="form-control" name="checkIn" required>
                        </div>
                        <div class="col-md-3 mb-3">
                          <label class="form-label">Date de départ</label>
                          <input type="date" class="form-control" name="checkOut" required>
                        </div>
                      </div>
                      <button type="submit" class="btn btn-success">Créer</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Supprimer réservation -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#deleteReservation">
                    <i class="bi bi-trash"></i> Supprimer une réservation
                  </button>
                </h2>
                <div id="deleteReservation" class="accordion-collapse collapse" data-bs-parent="#reservationAccordion">
                  <div class="accordion-body">
                    <form id="deleteReservationForm">
                      <div class="mb-3">
                        <label class="form-label">ID de la réservation</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <button type="submit" class="btn btn-danger">Supprimer</button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- Afficher réservation -->
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#viewReservation">
                    <i class="bi bi-eye"></i> Afficher une réservation
                  </button>
                </h2>
                <div id="viewReservation" class="accordion-collapse collapse" data-bs-parent="#reservationAccordion">
                  <div class="accordion-body">
                    <form id="viewReservationForm">
                      <div class="mb-3">
                        <label class="form-label">ID de la réservation</label>
                        <input type="text" class="form-control" name="id" required>
                      </div>
                      <button type="submit" class="btn btn-info">Afficher</button>
                    </form>
                    <div id="reservationDetails" class="mt-3"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Liens rapides -->
    <div class="row mt-4">
      <div class="col-md-6 mb-3">
        <a href="/dashboard/catways" class="btn btn-primary btn-lg w-100">
          <i class="bi bi-list"></i> Liste des catways
        </a>
      </div>
      <div class="col-md-6 mb-3">
        <a href="/dashboard/reservations" class="btn btn-success btn-lg w-100">
          <i class="bi bi-calendar-check"></i> Liste des réservations
        </a>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/dashboard.js"></script>
</body>
</html>
